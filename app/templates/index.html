<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Network Fuzzing Tool</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">Neural Network Fuzzing Tool</h1>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5>Upload Model & Select Fuzzer</h5>
            </div>
            <div class="card-body">
                <form action="/upload" method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="file" class="form-label">Upload Neural Network Model</label>
                        <input class="form-control" type="file" id="file" name="file" required>
                        <div class="form-text">Upload a H5 model file.</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="fuzzer" class="form-label">Select Fuzzer</label>
                        <select class="form-select" id="fuzzer" name="fuzzer" required onchange="checkFuzzer()">
                            <option value="" selected disabled>Select a fuzzer...</option>
                            <option value="tensorfuzz">TensorFuzz</option>
                            <option value="dlfuzz">DLFuzz</option>
                            <option value="deephunter">DeepHunter</option>
                        </select>
                    </div>
                    
                    <div id="tensorfuzzInfo" class="alert alert-info mt-3" style="display: none;">
                        <strong>TensorFuzz Compatibility:</strong>
                        <ul>
                            <li>Works with any valid Keras/TensorFlow model in H5 format</li>
                            <li>Requires a defined input shape</li>
                            <li>Can handle various output types (including dictionary outputs)</li>
                            <li>Most flexible of the three fuzzers</li>
                        </ul>
                    </div>
                    
                    <div id="dlfuzzWarning" class="alert alert-warning mt-3" style="display: none;">
                        <strong>Warning: DLFuzz has strict requirements</strong>
                        <ul>
                            <li>Only works with specific model architectures for specific datasets</li>
                            <li>For MNIST dataset: Use a model named "model1"</li>
                            <li>For ImageNet dataset: Use standard models like "vgg16"</li>
                            <li>Requires Python 2.7, TensorFlow 1.2.1, Keras 2.1.3 environment</li>
                            <li>Only provided examples can be used and fuzzed successfully</li>
                        </ul>
                    </div>
                    
                    <div id="deephunterInfo" class="alert alert-info mt-3" style="display: none;">
                        <strong>DeepHunter Compatibility:</strong>
                        <ul>
                            <li>Extracts model architecture from H5 configuration</li>
                            <li>Primarily focuses on Dense layers for coverage tracking</li>
                            <li>Creates a simplified model for fuzzing (not directly using uploaded weights)</li>
                            <li>Models with custom layers or non-standard architectures may not work properly</li>
                        </ul>
                    </div>
                    
                    <button type="submit" class="btn btn-primary mt-3">Start Fuzzing</button>
                </form>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h5>About Neural Network Fuzzing</h5>
            </div>
            <div class="card-body">
                <p>This tool allows you to test neural networks using three different fuzzing techniques:</p>
                <ul>
                    <li><strong>TensorFuzz:</strong> A coverage-guided fuzzing framework for neural networks.</li>
                    <li><strong>DLFuzz:</strong> Differential fuzzing for deep learning systems.</li>
                    <li><strong>DeepHunter:</strong> A coverage-guided fuzzing framework using metamorphic testing.</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        function checkFuzzer() {
            const fuzzerSelect = document.getElementById('fuzzer');
            const tensorfuzzInfo = document.getElementById('tensorfuzzInfo');
            const dlfuzzWarning = document.getElementById('dlfuzzWarning');
            const deephunterInfo = document.getElementById('deephunterInfo');
            
            // hide all info/warning boxes first
            tensorfuzzInfo.style.display = 'none';
            dlfuzzWarning.style.display = 'none';
            deephunterInfo.style.display = 'none';
            
            // show box based on selected fuzzer
            if (fuzzerSelect.value === 'tensorfuzz') {
                tensorfuzzInfo.style.display = 'block';
            } else if (fuzzerSelect.value === 'dlfuzz') {
                dlfuzzWarning.style.display = 'block';
            } else if (fuzzerSelect.value === 'deephunter') {
                deephunterInfo.style.display = 'block';
            }
        }
    </script>
</body>
</html>